package randoop.sequence;

import java.util.Objects;
import randoop.types.ReferenceType;

/**
 * Represents a {@link ReferenceType} value created by the execution of a {@link Statement}.
 * Includes the type.
 */
@org.checkerframework.framework.qual.AnnotatedFor("org.checkerframework.checker.mustcall.MustCallChecker")
public final class ReferenceValue {

    /**
     * The type of this value.
     */
    private final @org.checkerframework.checker.mustcall.qual.MustCall({}) ReferenceType type;

    /**
     * The {@link Object} reference of this value.
     */
    private final @org.checkerframework.checker.mustcall.qual.MustCall({}) Object value;

    /**
     * Create the value object given its type and {@link Object} reference.
     *
     * @param type the type of this value
     * @param value the {@link Object} reference to this value
     */
    ReferenceValue(@org.checkerframework.checker.mustcall.qual.MustCall({}) ReferenceType type, @org.checkerframework.checker.mustcall.qual.MustCall({}) Object value) {
        this.type = type;
        this.value = value;
    }

    /**
     * Indicates whether two {@link ReferenceValue} objects are equal. Note: tests the {@code Object}
     * value of each object by identity.
     *
     * @param obj the object to test for equality
     * @return true if parameter has the same type and identical value to this object, false otherwise
     */
    @org.checkerframework.dataflow.qual.Pure
    public  @org.checkerframework.checker.mustcall.qual.MustCall({}) boolean equals(@org.checkerframework.checker.mustcall.qual.MustCall({}) ReferenceValue this, @org.checkerframework.checker.mustcall.qual.MustCall({}) Object obj) {
        if (this == obj) {
            return true;
        }
        if (!(obj instanceof ReferenceValue)) {
            return false;
        }
        ReferenceValue refValue = (ReferenceValue) obj;
        return this.type.equals(refValue.type) && this.value == refValue.value;
    }

    @org.checkerframework.dataflow.qual.Pure
    public  @org.checkerframework.checker.mustcall.qual.MustCall({}) int hashCode(@org.checkerframework.checker.mustcall.qual.MustCall({}) ReferenceValue this) {
        return Objects.hash(type, System.identityHashCode(value));
    }

    @org.checkerframework.dataflow.qual.SideEffectFree
    public @org.checkerframework.checker.mustcall.qual.MustCall({}) String toString(@org.checkerframework.checker.mustcall.qual.MustCall({}) ReferenceValue this) {
        return value.toString();
    }

    /**
     * Returns the {@link Object} reference of this value.
     *
     * @return the reference to the value
     */
    @org.checkerframework.dataflow.qual.Pure
    public @org.checkerframework.checker.mustcall.qual.MustCall({}) Object getObjectValue(@org.checkerframework.checker.mustcall.qual.MustCall({}) ReferenceValue this) {
        return value;
    }

    /**
     * Returns the type of this value.
     *
     * @return the type of this value
     */
    @org.checkerframework.dataflow.qual.Pure
    public @org.checkerframework.checker.mustcall.qual.MustCall({}) ReferenceType getType(@org.checkerframework.checker.mustcall.qual.MustCall({}) ReferenceValue this) {
        return type;
    }
}
