package randoop;

/**
 * Means that the execution of a statement threw an exception.
 */
@org.checkerframework.framework.qual.AnnotatedFor("org.checkerframework.checker.signature.SignatureChecker")
public class ExceptionalExecution extends ExecutionOutcome {

    private final @org.checkerframework.checker.signature.qual.SignatureUnknown Throwable exception;

    /**
     * @param exception the exception that was thrown
     * @param executionTime the execution time, in nanoseconds
     */
    public ExceptionalExecution(@org.checkerframework.checker.signature.qual.SignatureUnknown Throwable exception,  @org.checkerframework.checker.signature.qual.SignatureUnknown long executionTime) {
        super(executionTime);
        if (exception == null) {
            throw new IllegalArgumentException("exception must be non-null");
        }
        this.exception = exception;
    }

    /**
     * Return the exception.
     *
     * @return the exception
     */
    @org.checkerframework.dataflow.qual.Pure
    public @org.checkerframework.checker.signature.qual.SignatureUnknown Throwable getException(@org.checkerframework.checker.signature.qual.SignatureUnknown ExceptionalExecution this) {
        return this.exception;
    }

    /**
     * Warning: this method calls toString() of code under test, which may have arbitrary behavior. We
     * use this method in randoop.test.SequenceTests.
     */
    public @org.checkerframework.checker.signature.qual.SignatureUnknown String toString(@org.checkerframework.checker.signature.qual.SignatureUnknown ExceptionalExecution this) {
        return String.format("[ExceptionalExecution, %s, at %s]", exception.getClass().getName(), exception.getStackTrace()[0]);
    }
}
